{"version":3,"sources":["../node_modules/web3-eth-accounts/src sync","utils/getWeb3.js","services/swapService.js","components/Exchange/Exchange.jsx","services/daoService.js","components/Charities/Charities.jsx","actions/daoActions.js","App.js","actions/web3Actions.js","reducers/daoReducer.js","reducers/web3Reducer.js","reducers/index.js","store.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","getWeb3","Promise","reject","window","addEventListener","Object","asyncToGenerator","regenerator_default","a","mark","_callee","web3","_web","wrap","_context","prev","next","ethereum","Web3","enable","t0","console","log","stop","exchangeTokens","_ref","exchange","networkId","srcToken","dstToken","amount","sender","srcAddress","dstAddress","convertedAmount","exchangeAddr","ethValue","getTokenAddress","utils","toWei","CharitySwap","networks","address","handleApproval","methods","swap","send","from","value","_x","_x2","_x3","_x4","_x5","_x6","_x7","apply","this","arguments","getPrice","_ref2","_callee2","price","_context2","getExpectedRate","call","sent","abrupt","_x8","_x9","_x10","_x11","_x12","_x13","token","tokenData","tokenInfo","_ref3","_callee3","dstTokenAddr","_context3","eth","Contract","ERC20","abi","allowance","approve","Number","MAX_SAFE_INTEGER","toString","_x14","_x15","_x16","_x17","Exchange","man","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","to","charityTheme","estimatePrice","bind","assertThisInitialized","handleChange","_this$setState","setState","defineProperty","target","name","props","swapContract","length","account","_this2","_this$state3","react_default","createElement","className","onChange","aria-hidden","type","placeholder","concat","Dec","parseFloat","times","toDecimalPlaces","onClick","Component","connect","web3Reducer","getAllCharities","charityDao","charities","getCharities","getCurrDonationAmount","charityDaoAddress","kncAddress","daiAddress","kncToken","kncBalance","DAI","balanceOf","getTotalDonationAmount","_ref4","_callee4","totalDonations","_context4","totalDonated","getUserDonationAmount","_ref5","_callee5","user","userDonation","_context5","totalExchanged","getVotingPower","_ref6","_callee6","userAddr","votingPower","_context6","points","vote","_ref7","_callee7","arrPos","_context7","Charities","setTimeout","getVotingPowerForUser","pos","callVote","_this3","userVotingPower","map","charity","key","desc","mapDispatchToProps","dispatch","getState","daoContract","payload","_getState$web3Reducer","_getState$web3Reducer2","dao","App","componentDidMount","accounts","charitySwap","totalDonation","monthlyDonation","description","color","Math","floor","random","getAccounts","net","getId","alert","CharityDao","setWeb3Data","fetchEvents","error","_this$state","react_router_dom","react_router","exact","path","component","toFixed","INITIAL_STATE","combineReducers","undefined","action","objectSpread","swapReducer","reduxDevToolsEnchancer","__REDUX_DEVTOOLS_EXTENSION__","store","applyMiddleware","thunk","createStore","createStoreWithMiddleware","reducers","ReactDOM","render","es","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.189ae1c1.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 327;","import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        console.log('no web 3');\n        // const provider = new Web3.providers.HttpProvider(\n        //   \"https://mainnet.infura.io/v3/62f4e1303d164aea93fa5539cf88b3c5\"\n        // );\n        // const web3 = new Web3(provider);\n        // console.log(web3);\n        // resolve(web3);\n      }\n    });\n  });\n\nexport default getWeb3;\n","import tokenInfo from \"../utils/tokenInfo.json\";\nimport { ERC20, CharitySwap } from \"../utils/config.json\";\n\n\nexport const exchangeTokens = async (web3, exchange, networkId, srcToken, dstToken, amount, sender) => {\n    try {\n        const srcAddress = getTokenAddress(srcToken, networkId);\n        const dstAddress = getTokenAddress(dstToken, networkId);\n\n        const convertedAmount = web3.utils.toWei(amount, \"ether\");\n\n        const exchangeAddr = CharitySwap.networks[networkId].address;\n\n        if (srcToken !== \"ETH\") {\n            await handleApproval(web3, srcAddress, sender, exchangeAddr);\n        }\n\n        let ethValue = 0;\n\n        if (srcToken === \"ETH\") {\n            ethValue = convertedAmount;\n        }\n\n        await exchange.methods.swap(srcAddress, dstAddress, convertedAmount).send({ from: sender, value: ethValue });\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nexport const getPrice = async (web3, exchange, networkId, srcToken, dstToken, amount) => {\n    try {\n        const srcAddress = getTokenAddress(srcToken, networkId);\n        const dstAddress = getTokenAddress(dstToken, networkId);\n\n        const convertedAmount = web3.utils.toWei(amount, \"ether\");\n\n        const price = await exchange.methods.getExpectedRate(srcAddress, dstAddress, convertedAmount).call();\n\n        console.log(price[0]);\n\n        return price[0] / 1e18;\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nconst getTokenAddress = (token, networkId) => {\n    const tokenData = tokenInfo[token];\n\n    if (tokenData) {\n        return tokenData[networkId].address;\n    }\n};\n\nconst handleApproval = async (web3, dstTokenAddr, sender, exchangeAddr) => {\n    try {\n        const token = new web3.eth.Contract(ERC20.abi, dstTokenAddr);\n\n        const allowance = await token.methods.allowance(sender, exchangeAddr).call();\n\n        if (allowance === \"0\") {\n            await token.methods.approve(exchangeAddr, web3.utils.toWei(Number.MAX_SAFE_INTEGER.toString(), \"ether\")).send({from: sender});\n        }\n    } catch(err) {\n        console.log(err);\n    }\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Dec from 'decimal.js';\nimport './Exchange.scss';\nimport { getPrice, exchangeTokens } from '../../services/swapService.js';\n\nclass Exchange extends Component {\n  constructor(man) {\n    super(man);\n\n    this.state = {\n      from: 'ETH',\n      to: 'DAI',\n      amount: '',\n      price: '0',\n      charityTheme: {},\n    };\n\n    this.estimatePrice = this.estimatePrice.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.swap = this.swap.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value,\n      price: '0',\n    }, this.estimatePrice) // debounce this\n  }\n\n  async estimatePrice() {\n    const { from, to, amount } = this.state;\n    const { networkId, swapContract, web3 } = this.props;\n\n    let a = amount.toString();\n\n    if (a.length > 0) {\n      if (a[a.length - 1] === '.') {\n        this.setState({\n          price: 0,\n        });\n        return;\n      }\n    }\n\n    const price = await getPrice(web3, swapContract, networkId, from, to, amount);\n\n    this.setState({\n      price,\n    });\n  }\n\n  async swap() {\n    console.log('Swap!');\n\n    const { from, to, amount } = this.state;\n    const { web3, account, networkId, swapContract} = this.props;\n\n    await exchangeTokens(web3, swapContract, networkId, from, to, amount, account);\n\n  }\n\n  render() {\n    const { from, to, price, amount } = this.state;\n\n    return (\n      <div className=\"exchange-page\">\n        <div className=\"row\">\n          <div className='col-lg-5'>\n            <select className=\"form-control form-control-lg\" onChange={this.handleChange} name=\"from\" value={from}>\n              <option>ETH</option>\n              <option>DAI</option>\n              <option>MKR</option>\n              <option>KNC</option>\n              <option>OMG</option>\n            </select>\n          </div>\n\n          <div className='col-lg-2 text-center'>\n            <span className=\"glyphicon glyphicon-arrow-right\" aria-hidden=\"true\" />\n          </div>\n\n          <div className='col-lg-5'>\n            <select className=\"form-control form-control-lg\" onChange={this.handleChange} name=\"to\" value={to}>\n              <option>DAI</option>\n              <option>MKR</option>\n              <option>ETH</option>\n              <option>OMG</option>\n              <option>KNC</option>\n            </select>\n          </div>\n        </div>\n\n        <br />\n\n        <div className=\"row\">\n          <div className='col-lg-5'>\n            <div className=\"form-group\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"amount\"\n                onChange={this.handleChange}\n                placeholder={`${from} amount`}\n                value={amount}\n              />\n            </div>\n          </div>\n\n\n          <div className='col-lg-2 text-center'>\n            <span className=\"glyphicon glyphicon-arrow-right\" aria-hidden=\"true\" />\n          </div>\n\n          <div className='col-lg-5'>\n            <div className=\"price-estimate price\">\n              {Dec(parseFloat(amount) || 0).times(price || 0).toDecimalPlaces(2).toString()} {to}\n            </div>\n          </div>\n        </div>\n\n\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-lg-offset-3\">\n            <button type=\"button\" className=\"btn btn-primary btn-lg btn-block\" onClick={() => this.swap()}>Swap</button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nExchange.propTypes = {};\n\n\nconst mapStateToProps = (state) => ({\n  swapContract: state.web3Reducer.swapContract,\n  networkId: state.web3Reducer.networkId,\n  web3: state.web3Reducer.web3,\n  account: state.web3Reducer.account,\n});\n\nconst mapDispatchToProps = {\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Exchange);","import { ERC20 } from \"../utils/config.json\";\nimport { DAI } from \"../utils/tokenInfo.json\";\n\nexport const getDaoStatus = async (charityDao) => {\n    try {\n        const status = await charityDao.methods.getCurrentState().call();\n\n        if (status === 0) {\n            return \"ACTIVE\";\n        } else if (status === 1) {\n            return \"VOTING\";\n        } else {\n            return \"PAYOUT\";\n        }\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nexport const getAllCharities = async (charityDao) => {\n    try {\n        const charities = await charityDao.methods.getCharities().call();\n\n        return charities;\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nexport const getCurrDonationAmount = async (web3, networkId, charityDaoAddress, exchange) => {\n    try {\n        const kncAddress = ERC20.networks[networkId].address;\n        const daiAddress = DAI[networkId].address;\n\n        const kncToken = new web3.eth.Contract(ERC20.abi, kncAddress);\n\n        let kncBalance = await kncToken.methods.balanceOf(charityDaoAddress).call();\n\n        const price = await exchange.methods.getExpectedRate(kncAddress, daiAddress, kncBalance).call();\n\n        kncBalance = kncBalance / 1e18;\n\n        console.log(kncBalance, price);\n\n        return (kncBalance * price[0]);\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const getTotalDonationAmount = async (charityDao) => {\n    try {\n        const totalDonations = await charityDao.methods.totalDonated().call();\n\n        console.log(parseFloat(totalDonations));\n\n        return parseFloat(totalDonations) / 1e18;\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const getUserDonationAmount = async (charityDao, user) => {\n    try {\n        const userDonation = await charityDao.methods.totalExchanged(user).call();\n\n        return ((userDonation / 1e18) * 0.00075);\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nexport const getVotingPower = async (charityDao, userAddr) => {\n    try {\n        const votingPower = await charityDao.methods.points(userAddr).call();\n\n        return votingPower / 1e18;\n\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nexport const vote = async (charityDao, arrPos, sender) => {\n    try {\n        await charityDao.methods.vote(arrPos).send({ from: sender });\n\n    } catch(err) {\n        console.log(err);\n    }\n};\n\nexport const addCharity = async (charityDao, charityAcc, name, desc, sender) => {\n    try {\n        await charityDao.methods.addCharity(charityAcc, name, desc).send({ from: sender });\n\n    } catch(err) {\n        console.log(err);\n    }\n};","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './Charities.scss';\nimport { getCharities, getVotingPowerForUser, callVote } from '../../actions/daoActions';\n\nclass Charities extends Component {\n  constructor(man) {\n    super(man);\n\n    this.state = {};\n\n    this.vote = this.vote.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.props.getCharities();\n      this.props.getVotingPowerForUser();\n    }, 1000);\n  }\n\n  async vote(pos) {\n    console.log('Vote!');\n\n    this.props.callVote(pos);\n  }\n\n  render() {\n\n    console.log(this.props.userVotingPower);\n    return (\n      <div className=\"charities-page\">\n        <p>\n          Each 30 days the Charity Swap DAO decides which organisation gets the month's donation pool.\n          You can use the power you earn by swapping tokens to influence which charity gets the pool.\n        </p>\n\n        <p>\n          Your voting power: <b>{this.props.userVotingPower}</b>\n        </p>\n\n        <div className=\"charity-list\">\n          {\n            this.props.charities.map((charity) => (\n              <div className=\"charity-item\" key={charity.arrPos}>\n                <h2>{charity.name}</h2>\n                <div className=\"row\">\n                  <div className=\"col-lg-10\">\n                    <h3>{charity.desc}</h3>\n                    {/* <h4>Current month score: {charity.score}</h4> */}\n                  </div>\n                  <div className=\"col-lg-2\">\n                    <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.vote(charity.arrPos)}>Vote</button>\n                  </div>\n                </div>\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nCharities.propTypes = {};\n\nconst mapStateToProps = (state) => ({\n  charities: state.dao.charities,\n  userVotingPower: state.dao.userVotingPower,\n});\n\nconst mapDispatchToProps = {\n  getCharities,\n  getVotingPowerForUser,\n  callVote,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Charities);\n","import { getAllCharities, getVotingPower, vote } from \"../services/daoService\";\n\nexport const getInitialData = () => async (dispatch) => {\n  dispatch({\n    type: 'INITIAL_DAO_DATA',\n    payload: {\n      charities: []\n    }\n  });\n};\n\nexport const getCharities = () => async (dispatch, getState) => {\n  const { daoContract } = getState().web3Reducer;\n\n  let charities = await getAllCharities(daoContract);\n\n  console.log(charities);\n\n  if (!charities) {\n    charities = [];\n  }\n\n\n  dispatch({\n    type: 'CHARITIES',\n    payload: {\n      charities,\n    }});\n};\n\nexport const getVotingPowerForUser = () => async (dispatch, getState) => {\n  const { daoContract, account } = getState().web3Reducer;\n\n  let votingPower = await getVotingPower(daoContract, account);\n\n  console.log('Voting power: ', votingPower);\n\n  dispatch({\n    type: 'USER_VOTING_POWER',\n    payload: \n      votingPower,\n    });\n};\n\nexport const callVote = (pos) => async (dispatch, getState) => {\n  const { daoContract, account } = getState().web3Reducer;\n\n  await vote(daoContract, pos, account);\n \n};\n\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Switch, HashRouter, Route, Link } from 'react-router-dom'\nimport getWeb3 from './utils/getWeb3';\nimport Exchange from './components/Exchange/Exchange';\nimport Charities from './components/Charities/Charities';\n\nimport { setWeb3Data } from './actions/web3Actions';\n\nimport './css/bootstrap.min.css';\nimport './css/style.css';\n\nimport './App.scss';\n\nimport { getTotalDonationAmount, getUserDonationAmount, getCurrDonationAmount } from './services/daoService.js';\n\nimport { CharityDao, CharitySwap } from './utils/config.json';\n\nclass App extends Component {\n  constructor(man) {\n    super(man);\n\n    this.state = {\n      account: null,\n      web3: null,\n      charitySwap: null,\n      charityDao: null,\n      charityTheme: {},\n      totalDonation: 0,\n      userDonation: 0,\n      monthlyDonation: 0,\n    };\n  }\n\n  componentDidMount = async () => {\n    const charities = [\n      { description: 'Help fight climate change with every crypto swap. ', color: '#41bb78' },\n      { description: 'Help education in Ukraine with every crypto swap. ', color: '#36A4E1' },\n      { description: 'Help deliver vaccines to Congo with every crypto swap. ', color: '#DC6700' },\n      { description: 'Help deliver clean water to Madagascar with every crypto swap. ', color: '#B43442' },\n    ];\n    this.setState({\n      charityTheme: charities[Math.floor(Math.random() * charities.length)]\n    });\n    try {\n      const web3 = await getWeb3();\n\n      // Use web3 to get the user's accounts.\n      const accounts = await web3.eth.getAccounts();\n\n      const networkId = await web3.eth.net.getId();\n\n      if (networkId !== 42) {\n        alert('Please switch over to Kovan testnet');\n      }\n\n      const charitySwap = new web3.eth.Contract(CharitySwap.abi, CharitySwap.networks[networkId].address);\n      const charityDao = new web3.eth.Contract(CharityDao.abi, CharityDao.networks[networkId].address);\n\n      this.props.setWeb3Data(web3, accounts[0], networkId, charityDao, charitySwap);\n\n      const totalDonation = await getTotalDonationAmount(charityDao);\n\n      const userDonation = await getUserDonationAmount(charityDao, accounts[0]);\n\n      const monthlyDonation = await getCurrDonationAmount(web3, networkId, CharityDao.networks[networkId].address, charitySwap);\n\n      this.setState({\n        web3,\n        account: accounts[0],\n        networkId,\n        charityDao,\n        charitySwap,\n        totalDonation,\n        userDonation,\n        monthlyDonation\n      }, this.fetchEvents);\n\n    } catch (error) {\n      // Catch any errors for any of the above operations.\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`,\n      );\n      console.error(error);\n    }\n  };\n\n  fetchEvents = async () => {\n\n  };\n\n  render() {\n    const { charityTheme, totalDonation, userDonation, monthlyDonation } = this.state;\n\n    console.log(monthlyDonation);\n\n    return (\n      <HashRouter>\n        <div className=\"content-body\">\n          <div className=\"container\">\n\n            <div className=\"row heading\">\n              <div className=\"col-lg-12\">\n                <Link to=\"/\"><h1>Charity Swap</h1></Link>\n                <h3>{charityTheme.description}</h3>\n              </div>\n            </div>\n\n            <style>\n              {`\n                :root {\n                  --primary: ${charityTheme.color};\n                }\n              `}\n            </style>\n\n              <div className=\"row\">\n                <div className=\"col-lg-9\">\n                  <div className=\"card\">\n                    <div className=\"card-body\">\n\n                      <Switch>\n                        <Route exact path=\"/\" component={Exchange} />\n                        <Route exact path=\"/charities\" component={Charities} />\n                      </Switch>\n\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"col-lg-3 sidebar-wrapper\">\n                  <div className=\"row\">\n                    <div className=\"card gradient-1\">\n                      <div className=\"card-body\">\n                        <h3 className=\"card-title text-white\">Total donated </h3>\n                        <div className=\"d-inline-block\">\n                          <h2 className=\"text-white\">{totalDonation}$</h2>\n                          <Link to=\"/charities\">Browse charities</Link>\n                        </div>\n                        <span className=\"float-right display-5 opacity-5\"><i className=\"fa fa-money\" /></span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"row\">\n                    <div className=\"card gradient-4\">\n                      <div className=\"card-body\">\n                        <h3 className=\"card-title text-white\">This month:</h3>\n                        <div className=\"d-inline-block\">\n                          <h2 className=\"text-white\">{monthlyDonation}$</h2>\n                        </div>\n                        <span className=\"float-right display-5 opacity-5\"><i className=\"fa fa-users\" /></span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"row\">\n                    <div className=\"card gradient-2\">\n                      <div className=\"card-body\">\n                        <h3 className=\"card-title text-white\">Your donations:</h3>\n                        <div className=\"d-inline-block\">\n                          <h2 className=\"text-white\">{userDonation.toFixed(6)}$</h2>\n                        </div>\n                        <span className=\"float-right display-5 opacity-5\"><i className=\"fa fa-heart\" /></span>\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n\n              </div>\n\n\n          </div>\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n  setWeb3Data,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","\n\nexport const setWeb3Data = (web3, account, networkId, daoContract, swapContract) => async (dispatch) => {\n    dispatch({\n      type: 'SET_DATA',\n      payload: {\n          web3,\n          account,\n          networkId,\n          daoContract,\n          swapContract,\n      }\n    });\n  };","const INITIAL_STATE = {\n  charities: [],\n  totalDonations: '0',\n  userVotingPower: 0\n};\n\nexport default (state = INITIAL_STATE, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case 'INITIAL_DAO_DATA':\n      return {\n        ...state,\n        charities: payload.charities,\n      };\n\n    case 'CHARITIES':\n      return {\n        ...state,\n        charities: payload.charities,\n      };\n\n    case 'USER_VOTING_POWER':\n        return {\n          ...state,\n          userVotingPower: payload,\n        };\n\n\n    default:\n      return state;\n  }\n};\n","const INITIAL_STATE = {\n    account: null,\n    networkId: 0,\n    web3: null,\n    daoContract: null,\n    swapContract: null,\n  };\n  \n  export default (state = INITIAL_STATE, action) => {\n    const { type, payload } = action;\n  \n    switch (type) {\n      case 'SET_DATA':\n        return {\n          ...state,\n          web3: payload.web3,\n          account: payload.account,\n          networkId: payload.networkId.toString(),\n          daoContract: payload.daoContract,\n          swapContract: payload.swapContract,\n        };\n  \n      default:\n        return state;\n    }\n  };","import { combineReducers } from 'redux';\nimport dao from './daoReducer';\nimport swapReducer from './swapReducer';\nimport web3Reducer from './web3Reducer';\n\nexport default combineReducers({\n  dao,\n  web3Reducer,\n  swapReducer,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducers from './reducers/'\n\nconst reduxDevToolsEnchancer = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\nconst createStoreWithMiddleware = applyMiddleware(thunk)(createStore);\nconst store = createStoreWithMiddleware(reducers, reduxDevToolsEnchancer);\n\nwindow.store = store;\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport App from './App';\nimport store from './store';\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}